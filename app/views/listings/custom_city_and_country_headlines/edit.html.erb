<%= render(layout: 'layouts/modules/page_plate')  do %>

  <h1 class="plate-header"><%= t("listing.customize_headline") %></h1>

  <% if @listing.valid? %>
    <div class="alert alert-info">
      <%= t("listing.customize_headline_message") %>
    </div>

    <div class="inner-content">
      <% if @listing.errors.any? %>
        <div class="alert alert-danger">
          <ul class="error-explanation">
            <% @listing.errors.full_messages.each do |msg| %>
              <li><%= msg %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <%= form_for(@listing, url: management_custom_city_and_country_headline_path(@listing), html: {class: 'well form-inline is-inline'}) do |f| %>
        <fieldset>
          <div>
            <%= f.label(:custom_nearest_city, class: "label-vertical-form") %>
            <%= f.text_field(:custom_nearest_city, value: @listing.custom_nearest_city, class: "input-small", placeholder: @listing.city_and_country_headline.first) %>
          </div>
          <div>
            <%= f.label(:custom_country, class: "label-vertical-form") %>
            <%= f.text_field(:custom_country, value: @listing.custom_country, class: "input-small", placeholder: @listing.city_and_country_headline.last) %>
          </div>
          <%= f.button(t("button.save"), class: 'btn btn-primary', style: "margin-top: 10px;") %>
        </fieldset>
      <% end %>
    </div>
  <% else %>
    <div class="alert alert-danger">
      <strong><%= t("listing.customize_headline_invalid") %>.</strong>
      <ul class="error-explanation">
        <% @listing.errors.messages.each_value do |msg| %>
          <li><%= msg[0] %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
<% end %>
